<div class="container-narrow">
<%= partial :'partials/_topbar' %>
<div class="page">

  <section>
    <h2>Setup</h2>

    <p>You can add the following tag to any website to accept webmentions.</p>

    <p><pre><code>&lt;link rel="webmention" href="https://webmention.io/<%= @user.username %>/webmention" /&gt;</code></pre></p>
  
    <p>If you would also like to receive pingbacks, you can use the tag below. Keep in mind that you are likely to receive lots of pingback spam though, so only add this if you're sure you want to support legacy pingbacks.</p>
    <p><pre><code>&lt;link rel="pingback" href="https://webmention.io/<%= @user.username %>/xmlrpc" /&gt;</code></pre></p>

    <p>You can use this account on any number of websites. The webmentions can be queried per website <a href="https://github.com/aaronpk/webmention.io#api">using the API</a>.</p>
  </section>

  <section>
    <h2>Mentions Feed</h2>

    <p>The link below provides all mentions received on your account as a Microformats feed. You can subscribe to this in a reader like <a href="https://aperture.p3k.io">Aperture</a>. You may want to add this to your Aperture "Notifications" channel!</p>

    <p><pre><code><%= "#{SiteConfig.base_url}/api/mentions.html?token=#{@user.token}" %></code></pre></p>
    <p><pre><code><%= "#{SiteConfig.base_url}/api/mentions.atom?token=#{@user.token}" %></code></pre></p>
  </section>

  <section>
    <h2>API Key</h2>

    <p>In order to access the list of mentions for a domain (not just a specific URL), you will need to use a token. Below is the token for your account.</p>
    <p>If you don't mind anyone being able to retrieve webmentions to your domain, you don't need to keep this private. The only thing this token can do is retrieve all webmentions to your domain. It can't modify any data on your account.</p>

    <p><pre><code><%= @user.token %></code></pre></p>

    <p>If you need to change your token, click the button below.</p>

    <form action="/settings/change_token" method="post">
      <button type="submit">Generate New Token</button>
    </form>

  </section>

</div>

</div><!-- container -->
